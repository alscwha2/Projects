<!DOCTYPE html>
<html lang="en">
<head>
  <title>DSC 530 Assignment #2</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.15/d3.min.js" charset="utf-8" type="text/javascript"></script>
  <script src="campaign_finance.js" type="text/javascript"></script>
  <style type="text/css">
  	.axis path,
  	.axis line{
  		fill: none;
  		stroke: grey;
  		stroke-dasharray: dotted;
  		stroke-width: 3px;
  	}
  	.axis text{
  		font-family: sans-serif;
  		font-size: 11px;
  	}
  </style>
</head>
<body>
  <script type="text/javascript">
  	var q4 = function(d) {return d.q4 / 1000000};

  	//the svg
  	var w = 400;
  	var h = 700;
  	var temp = 0;
  	var svg = d3.select("body")
  		.append("svg")
  		.attr("width", w)
  		.attr("hight", h);
  	
  	//the bars
  	var bars = svg.selectAll("rect")
  		.data(cands)
  		.enter()
  		.append("rect")
  		.attr("height", function(d) {return q4(d);})
  		.attr("x", function(d, i) {return 30 + i * ((w - 30) / cands.length);})
  		.attr("y", function(d) {return h - q4(d)})
  		.attr("width", (w - 30) / cands.length - 1)
  		.style("fill", function(d) {
  			var color = "green";
  			if (d.Party.startsWith('D')) {
  				color = "blue";
  			} else {
  				color = "red";
  			}
  			return color;
  		});

  	//the axis
  	var axisScale = d3.scale.linear()
  		.domain([0, d3.max(cands, function(d) {return q4(d);})])
  		.range([d3.max(cands, function(d) {return q4(d);}), 0]);
  	var axis = d3.svg.axis()
  		.scale(axisScale)
  		.orient("left")
  		.ticks(5);

  	svg.append("g")
  		.attr("class", "axis")
 		.call(axis)
 		.attr("transform", "translate(27, 30)");

 	//the labels
 	var labels = d3.select("body").selectAll("text")
 		.data(cands)
 		.enter()
 		.append("text")
 		.text(function(d) {
 			var full = d.Candidate;
 			var last = full.split(" ")[1];
 			return last;
 		})
  		.attr("x", function(d, i) {return 30 + i * ((w - 30) / cands.length);})
  		.attr("y", h)
 		.attr("text-anchor", "middle");
  </script>
</body>
</html>
